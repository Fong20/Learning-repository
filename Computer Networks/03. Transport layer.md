# 03 Transport Layer
- Transport layer provides logical communication between processes running on different hosts

Role of hosts in transport layer:
- Sender host: Peforms segmentation of packets (process of breaking down a large packet into smaller segments / datagrams)
- Destination host: Reassembles segments into the message, and pass to application layer

**Types of protocol in the transport layer**
1. Transmission Control Protocol (TCP)
2. User Datagram Protocol (UDP)

## TCP vs UDP
- TCP is reliable whereas UDP is not reliable
- TCP is connection oriented (establish connection between the host and destination through 3 way handshake. The 3 way handshake ensures that the destination is reachable) while UDP is connectionless
- TCP provides both congestion control and flow control while UDP does not provide any of the control
- TCP is stateful (Host maintains buffer utilization for flow control, congestion control parameter for congestion control and acknowledgment number for reliability) while UDP is stateless (Host do not maintain buffer utilization, congestion
control parameter, acknowledgment number)
- Since TCP is reliable and provides various functions such as congestion control and flow control, it's header size is larger than the UDP's header size
- TCP is used in email, file trnasfer services etc while UDP is use for VoIP, livestreaming services etc
  
![image](https://github.com/user-attachments/assets/75334195-59ec-4f70-89d5-fa17e156099b)

## Reliable data transfer protocol in TCP

### Scenario 1: No packet loss
Packet is sent and acknowledgement is received

### Scenario 2: Packet loss
- Acknowledgement of packet is not received with the specific timeframe (timeout), signifying that packet is loss and not received by the receiver.
- As a result, the lost packet will be resent

### Scenario 3: ACK loss
- ACK loss scenario is similar to packet loss scenario where the sender waits for a specfic time and does not receive an acknowledgement (timeout). In this case, the only difference is that the  packet is received by the receiver but the acknowledgement packet is lost.
- As a result, the packet will be resent as the sender does receive the acknowledgement packet which would cause the receiver receiving duplication of the same packet.

### Scenario 4: Delayed ACK

### Stop and wait protocol
Sender send a single packet, receive acknowledgment; then only send the next packet. As a result, it takes more time as the sender is not performing anything when waiting for the acknowledgement.

### Pipelined protocol
- In pipelined protocol, the sender sends multiple unacknowledged packets at a single time
- As a result, the sender must increase the range of sequence number and the receiver must have sufficient buffer size to receive multiple packets at the same time

There are two types of pipelined protocol:
1. Go Back N (GBN)
2. Selective Repeat (SR)

### Go-back-N
- Sender: There is no differece between go-back-n and selective receiver
- Receiver: Go-back-n only sends cumulative acknowledgement
- No buffer
- Timeout: Sender has a single timer for the oldest unacknowledged packet. When timer expire, retransmit all sent but unacknowledged packets. If window size is large, There can be many unacknowledged packets in pipeline, so a single packet loss can cause sender to retransmit many packets

### Selective repeat
- Sender:  Can send N unacknowledged packets in pipeline
- Receiver: Send acknowledgment for each packet
- Has buffer
- Timeout: Sender has timer for each unacknowledged packet, so it has many timers. When timer expire, it retransmits the unacknowledged packet only. As a result, it addresses the disadvantage of Go back N protocol

## Congestion control
Congestion control = controls a host's sending rate so that each connection which travels through the link utilize an equal hare of bandwidth

## Flow control
Flow control = controls the source host's sending rate so that it does not overload the receiver host's buffer (capacity)

Go Back N protocol
