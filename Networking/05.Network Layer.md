# 05. Network Layer

## 5.1 Network Layer Protocols

4 functions:
- addresssing end devices
- perform encapsulation (adding headers)
- perform routing
- perform de-encapsulation (reading information from the headers)

Common network layer protocols include:
- IP Version 4 (IPV4)
- IP Version 6 (IPV6)

Characteristics of IP protocol
- connectionless. No connection is established before sending the data packets. Basically, there is no data exchange prior to data transmission. It is the function of the transport layer to transmit data.

  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/640ab91c-a30f-4e0d-a4d7-b6eb99a63f10)

- best effort (unreliable). No overhead is used to guarantee packet delivery. Basically, it does not guarantee that all the packets transmitted will be received

   ![image](https://github.com/Fong20/Learning-repository/assets/150316121/93cb6f44-effc-46df-9b29-5e25bc65b36a)

-  media independent. Ip packets work independently of the medium carrying the data.

- ![image](https://github.com/Fong20/Learning-repository/assets/150316121/c58d7833-1ac3-4ade-9ce1-9e25e9a585f0)


![image](https://github.com/Fong20/Learning-repository/assets/150316121/c16433e9-ef7d-4680-89d8-e60bfc415eaf)

### IPv4

  ### IPv4 packet header
  - Version = IPv4 or IPv6 version
  - Internet header length = length of header
  - Protocol = protocol used in the data
  - Header checksum = Peforms error detection
  - time to live = Prevents circulation of frame in a loop (Prevents the data from being circulated in the same network too long, the router will drop the data when the TTL reaches 0)
  
  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/59681505-b6b2-4f9f-9fb4-1ac1a7029bca)

  
  ### limitations of Ipv4
  - IP address depletion. There are limited number of IP address.
  - Internet routing table expansion. Internet routing is tougher to perform when the network is scaled up.
  - Lack of end-to-end connectivity

![image](https://github.com/Fong20/Learning-repository/assets/150316121/10d54a10-c6ac-4630-984f-1a2d893cd25f)

To solve the the limited number of IP address, we use several methods such as the public and private IP address as well as classes

### IPv6
Ipv6 was introduced to sovle the limitations of Ipv4. However, it is still slowly being incorporated as most of our current networks rwork on IPv4/not all network devices support IPv6 yet.

  ### Characteristics of IPv6:
  - Increased address space
  - Improved packet handling
  - Integrated security

![image](https://github.com/Fong20/Learning-repository/assets/150316121/4efe71d0-abe6-4158-9925-21eaf53d5ab2)

  ### IPv6 packet header
  - Version
  - Traffic class
  - Physical length
  - Next header
  - Hop limit = TTL

![image](https://github.com/Fong20/Learning-repository/assets/150316121/c472034a-a9e6-4f03-95fd-563f1077a1fb)

### IPv4 vs IPv6 
We use decimal for IPv4 whereas hexadecimals for IPv6

**IPv4 vs IPv6 packet header:**
![image](https://github.com/Fong20/Learning-repository/assets/150316121/ccb8ccff-dd1f-4038-85df-64d252beb8e7)

## 5.2 Routing
- The router uses a routing table to execute routing. the routing table contains direct connection, local network route and local default route.

- Direct connection = Devices which are connected directly to the router.

  ### IPv6 Host Routing table
  **netstat -r** is a command which is used to look at the host routing table.

![image](https://github.com/Fong20/Learning-repository/assets/150316121/86297d01-1488-42fe-9016-b4eb95f8cc0e)

  ### IPv6 Router routing table
  **show ip route** is a command which is used to look at the router routing table.

  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/c7741122-d335-4d77-81b9-25bd2c4bd2d7)

###IPv4 address format
  first portion is the network portion (address of the network) while the other half is the host portion (address of the end device).

  - Eg: IPv4 is 192.168.10.024, address of the host is .5 (Note: .1 is reserved for gateways)
  - 192.168.10 is the network portion.
  - .024 is the mask which is used to determine which is the network portion and which is the host portion. .024 means that the first 24 bits are allocated for the network while the rest are allocated for the host.
  - 192.168.10.5 is used to describe the address of the host in the network

![image](https://github.com/Fong20/Learning-repository/assets/150316121/66017306-fb8c-47b4-8610-8dcf66170229)




