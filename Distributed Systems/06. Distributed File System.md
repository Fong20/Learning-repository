# 06. Distributed File System

## File Service
File is an abstraction of permanent storage, stored on
non-volatile media like disks and tapes.
• Functions provided by file systems:
- read/write data;
- locating records based on keyword-based index.
• A file service allows programs to store and access
remote files, and allows users to share files from any
computer in the Internet.

### File Service Type

### Upload/Download model
- Read file: copy file from server to client
- Write file: copy file from client to server
• Advantage
- Simple
• Problems
- Wasteful: what if client needs small piece?
- Problematic: what if client doesn’t have enough space?
- Consistency: what if others need to modify the same file?

### Remote access model
- File service provides functional interface:
- create, delete, read bytes, write bytes, etc…
• Advantages:
- Client gets only what’s needed
- Server can manage coherent view of file system
• Problem:
- Possible server and network congestion
- Servers are accessed for duration of file access
- Same data may be requested repeatedly

## File System
Persistent stored data sets
• Hierarchic name space visible to all processes
• API with the following characteristics:
- access and update operations on persistently stored data sets
- Sequential access model (with additional random facilities)
• Sharing of data between users, with access control
• Concurrent access:
- certainly for read-only access
- what about updates?
• Other features:
- mountable file stores

## Characteristics of File System
File systems are responsible for the organisation,
storage retrieval, naming, sharing and protection of
files.
• Files contain data and attributes.
• Metadata refers to the additional info stored by a file
system that is used for file management.
- Includes file attributes, directories and other persistent info.

## Requirements of Distributed File System

### 1. Transparency requirements.
- Access transparency: Clients should be unaware of the distribution
of files. The same command or operation can be used to access
local and remote files.
- Location transparency: Clients should see a uniform file name
space. Files may be relocated without changing their pathnames.
- Mobility transparency: Whenever files are moved, client programs
need not be recompiled and system administration tables need not
be changed.
- Performance transparency: Clients should continue to perform
satisfactorily for a service load of a specified range.
- Scaling transparency: The service can scale to cater for increasing
number of users and expansion of network size.

### 2. File Replication
- Copies of a file may be stored at different locations. Load of
providing a service is distributed between a few servers, thus,
enhancing scalability and fault tolerance.

### 3. Fault tolerance
- Deals with correct operation of servers after the failure of a
client, and correct operation of client programs due to lost
messages and temporary interruptions of service.

### 4. Concurrent file update
- Clients accessing a file concurrently should not be aware of the
fact. Operations executed by one client should not interfere with
other clients’ operations. Techniques for implementing
concurrency is expensive; usually implemented as file or record
locking.

### 5. Hardware and OS heterogeneity
- The service interface can be provided on different OS and computers.

### 6. Consistency
- With one-copy update semantics, the file content seen by users
accessing/updating a file is what they would see if only one copy of the
file exists.

### 7. Security
- Users must be authenticated before access is granted.
- Request/reply messages are encrypted to protect the content.

### 8. Efficiency
- A distributed file service should offer the same facilities
offered by conventional file systems, and it should be of
comparable performance and is as powerful.

## File Service Architecture
There are 3 components:
- flat file service;
- directory service;
- client module.

<img width="507" height="278" alt="image" src="https://github.com/user-attachments/assets/e343aedc-5e79-41e7-8b55-35e2f202b1a0" />

## Sun NFS (Network File System)
• NFS protocols are independent of OS.
• Provides transparent access to remote files.
• Usually, each computer has an NFS client and server
modules are installed in the kernel.
• Client-server relationship is symmetrical: each computer
can act as a client and a server, and provides remote access
for other machines.
- Common to configure a few machines as dedicated servers.

### NFS architecture

<img width="507" height="304" alt="image" src="https://github.com/user-attachments/assets/d6830660-6051-4c6f-a2c8-e93040ed114c" />

### NFS setup
1. nfs kernel - install at the server to export the file
2. nfs common - installed at the client to access the distributed


