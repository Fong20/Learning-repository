# 04. User interface, system calls and services

## User interface
Many operating systems currently include both command line interface nad graphical user interface

There are two main types of implementation
- command line interface
- graphical user interface

  ### Command line interpreter
  - Its primary function is to **fetch commands from the user and execute the command.**
  - The commands could be **built-in commands** or **system program commands to locate the file, load the file and execute the file.**

    **Example of built-in commands:**
    - ipconfig
    - ping
    - ping -6
    - tracert
    - netstat
    - telnet
    - javac (used to compile java source code into bytecode)
    - java (used to execute the bytecode into machine code)
 
  ### Why CLI?
  - Faster remote access
  - It is easier to execute certain functions in the CLI as compared to GUI
  - Automate complex tasks such as batch processing
    
    ![image](https://github.com/Fong20/Learning-repository/assets/150316121/629b1ef8-424f-419d-8ef1-83d695e48adf)

  ### Batch processing
  - Batch processing is the method computers use to periodically complete high-volume, repetitive data jobs.
  - Batch processing runs on command line interface

  ### Graphical user interface (GUI)
  - GUI is more user friendly as it allows the user to interact through the usage of icons. The user can click on the icon to access the particualr function

## Interaction between I/0 and operating system
- Most modern OS are **interrupt driven which means the user's input will interrupt the operating system to execute a process**
- When there is event (user provides input), an interrupt is generated. The OS will deal with the interrupt and determine the action to be taken
- When there are no processes to execute, or no I/O devices, or no response from the user, the OS will remain idle.

## Operating system services
- Services are required for the execution of programs
- If there is **no particular OS system calls to access the OS services**, the **particular program cannot be executed.**

Example:
File management system call is required to access the file system manipulation services in order to execute the file manipulation and modification programs.

![image](https://github.com/Fong20/Learning-repository/assets/150316121/8367a1a6-7e5b-4ed1-a271-88fb73d504b5)

![image](https://github.com/Fong20/Learning-repository/assets/150316121/cc435f56-ffc4-4b93-a271-0695db77d41f)

  ### Types of OS services
  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/4641c01b-5a9f-463f-8045-1d2b4b91a1bb)

## Dual mode operation
Dual Mode operation is necessary for **specifying the access to the users only through the tasks being used in an operating system.**

  ### User mode
  - When the computer system is running user applications like creating a text document or using any application program, the system is in user mode.
  - In user mode, user applications are restricted from accessing privileged resources such as hardware devices or sensitive system data.
  - The CPU can **only execute non-privilege instructions**
  - The mode bit for user mode is 1

  ### Kernel mode
  - When the user application requires services from the kernel and requests services through system call or an interrupt occurs, then there will be a transition from user mode to kernel mode to fulfill the requests.
  - In kernel mode, the operating system has full access to resources such as hardware devices and sensitive system data.
  - Priviledged instructions can only be run in kernel mode 
  - In kernel mode, the CPU can **execute all instructions (privilege and non-previlege)**
  - The mode bit for kernel mode is 0

  - If **any applications requires the OS to conduct privilege instructions**, it needs to **make a system call to access the kernel mode**
  - Otherwise, if the user program **does not require the OS to perform privilege instructions**, then **no system call is performed.**

  ### Context switching
  The process of switching from user mode to kernel mode or vice versa. It produces overhead which willa affect the system's performance.

![image](https://github.com/Fong20/Learning-repository/assets/150316121/2dc3fbe3-63e0-4246-904e-57ed1e3fe1e7)

## System calls
- A computer program **cannot directly access the computer hardware resources**, it needs to **go through the operating system.** System call is a **programmatic way in which a computer program requests a service from the kernel** of the operating system it is executed on. Hence, it is **a way for programs to interact with the operating system.**
- System calls are usually written in C/C++

![image](https://github.com/Fong20/Learning-repository/assets/150316121/c6493b1d-8edf-4cd3-b62a-1d2de2b82462)

![image](https://github.com/Fong20/Learning-repository/assets/150316121/96c2055d-d3ab-4cc0-9220-b7cea2b7afa1)

![image](https://github.com/Fong20/Learning-repository/assets/150316121/d8b8001b-7120-4fdf-bf3d-88157141522e)

  ### Purpose of system calls
  - User-Kernel Boundary. System calls serve as the authorized gateway for user programs when requesting services from the kernel. They ensure that user programs cannot arbitrarily access kernel functions or critical system resources.
- Resource Management. User programs can request and manage vital resources like CPU time, memory, and file storage via system calls. The OS oversees the process and guarantees that it is completed in an organized manner.
- Streamlined Development. System calls abstract the complexities of hardware. This allows developers to perform operations like reading and writing to a file or managing network data without needing to write hardware-specific code.
- Security and Access Control. System calls implement checks to ensure that requests made by user programs are valid and that the programs have the necessary permissions to perform the requested operations.
- Inter-Process Communication (IPC). System calls provide the mechanisms for processes to communicate with each other. They offer features like pipes, message queues, and shared memory to facilitate this inter-process communication.
- Network Operations. System calls provide the framework for network communications between programs. Developers can devote their attention to building their application's logic instead of focusing on low-level network programming.

  ### How do system calls work?
  1. System Call Request. The application requests a system call by invoking its corresponding function. For instance, the program might use the read() function to read data from a file.
  
  2. Context Switch to Kernel Space. A software interrupt or special instruction is used to trigger a context switch and transition from the user mode to the kernel mode.
  
  3. System Call Identified. The system uses an index to identify the system call and address the corresponding kernel function.
  
  4. Kernel Function Executed. The kernel function corresponding to the system call is executed. For example, reading data from a file.
     
  5. System Prepares Return Values. After the kernel function completes its operation, any return values or results are prepared for the user application.

  6. Context Switch to User Space. The execution context is switched back from kernel mode to user mode.
  
  7. Resume Application. The application resumes its execution from where it left off, now with the results or effects of the system call.
     
  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/8a0d01a8-84ae-463f-903a-caac91cedbbb)

  ### Types of system calls
  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/e69f6487-4595-424d-8119-a5753b0ca695)

  ### System calls and API
  - System call provides the operating system services to the program through an Application program interface (API)
  - API = class library
  - Each system call is associated with a number. To access a particular service, it needs to search for the system call number in the table and return the services
  - API is used instead of native system calls as a program is not required to know how the system call is being implemented but by only following the API and understand what it will return.

  ![image](https://github.com/Fong20/Learning-repository/assets/150316121/1b6fb1d8-f239-4860-8dc7-76ca48ae62dc)


