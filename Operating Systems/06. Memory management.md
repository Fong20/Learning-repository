# 06. Memory management
- Before a program can be executed, the program must be brought from the hard disk to the main memory
- Main memory and CPU registers are the only storage medium which can be directly accessed by the CPU.
- The main function of memory management is the allocation of memory

5 principle requirements which memory management must satisfy:
1. Protection
2. Relocation
3. Sharing
4. Logical organization
5. Physical organization

## Protection

## Relocation
backing store = virtual memory

The logical organization is generated by the CPU

logical address + address before relocate = actual physical address

## Sharing

## Logical organization
Logical organization = process of generating a logical address.

## Memory partitioning
The operating system occupies some fixed position of the main memory, and the remaining amount of memory is allocated to other processes.

There are two types of memory partitioning
1. Contiguous
2. Non-contiguous

  ### Fragmentation
  Fragmentation is free memory space which are too small to be used by other processes. As a result, the memory space is wasted as it is unused.

  **There are two types of fragmentation**
  1. Internal fragmentation = only occurs in fixed partition
  2. External fragmentation = only occurs in dynamic partition
     
  ### Fixed partitioning
  In fixed partitioning, the memory is divided into fixed, equal size or variable size partitions.

  Advantages
  - simplicity. The memory space is divided into several fixed, equal-size or variable size partitions
    
  Disadvantages
  - Occurence of internal fragmentation. This can be fixed by using fixed, but variable size partitions and assign the process to the smallest partition which it can fit.

  ### Dynamic partitioning
  - In dynamic partitioning, the memory space is allocated to the process based on exactly how much memory the process requires. 
  - The memory is not partitioned into fixed size and could be in different sizes.
  - External fragmentation occurs in dynamic partitioning. 

    ### Compaction
    - Compaction is a method used to solve external fragmentation.
    - However, it is time consuming as the OS needs to rearrange the processes to make them contiguous.
    - Hence, it is better to make use and fill in the free memory gaps smartly to reduce external fragmentation by using several algorithms.
   
    **Algorithms:**
    1. First fit = Searches the memory for free gap from the beginning and stops searching when the process is able to be fit in the empty gap.
    2. Next-fit = Searches the memory for free space from the location where the first-fit search ended
    3. Best fit = Searches through the entire memory for free gaps and allocates the smallest gap which is enough to fit in the process.
    4. Worst fit = Searches through the entire memory for free gaps and allocates the largest gap to fit in the process.

    The ideal algorithms are next-fit and best-fit as it still provides plenty of free memory space whereas worst-fit is the worst algorithm
